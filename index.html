<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <title>Open Curb</title>

  <link rel="manifest" href="manifest.json">

  <link rel="apple-touch-icon" sizes="180x180" href="icon-180.png">
  <link rel="apple-touch-icon" sizes="192x192" href="icon-192.png">
  <link rel="apple-touch-icon" sizes="512x512" href="icon-512.png">

  <meta name="theme-color" content="#003B71">

  

  

  <script src="https://unpkg.com/html5-qrcode" type="text/javascript"></script>

  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;900&display=swap" rel="stylesheet">

  <script type="importmap">
    {
            "imports": {
                "react": "https://esm.sh/react@18.2.0",
                "react-dom/client": "https://esm.sh/react-dom@18.2.0/client",
                "lucide-react": "https://esm.sh/lucide-react@0.344.0"
            }
        }
    </script>

  <style>
    :root {
      --indy-blue: #003B71;
      --indy-red: #D11241;
      --indy-white: #FFFFFF;
      --indy-sky: #E1E8F0;
    }

    body {
      background-color: var(--indy-blue);
      color: white;
      margin: 0;
      font-family: 'Inter', sans-serif;
      overscroll-behavior-y: auto;
    }

    .hide-scroll::-webkit-scrollbar {
      display: none;
    }

    .hide-scroll {
      -ms-overflow-style: none;
      scrollbar-width: none;
    }

    @supports (padding-top: env(safe-area-inset-top)) {
      .safe-top {
        padding-top: env(safe-area-inset-top);
      }

      .safe-bottom {
        padding-bottom: env(safe-area-inset-bottom);
      }
    }

    #reader {
      width: 100%;
      border-radius: 1rem;
      overflow: hidden;
    }

    #reader video {
      object-fit: cover;
      border-radius: 1rem;
    }
  </style>
</head>

<body>
  <div id="root"></div>

  <script>
    if ('serviceWorker' in navigator && (window.location.protocol === 'https:' || window.location.protocol === 'http:')) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('./service-worker.js')
          .then(reg => console.log('SW registered'))
          .catch(err => console.log('SW registration skipped:', err.message));
      });
    }
  </script>

  <script type="module">function ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }
function _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }
function _defineProperty(e, r, t) { return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, { value: t, enumerable: !0, configurable: !0, writable: !0 }) : e[r] = t, e; }
function _toPropertyKey(t) { var i = _toPrimitive(t, "string"); return "symbol" == typeof i ? i : i + ""; }
function _toPrimitive(t, r) { if ("object" != typeof t || !t) return t; var e = t[Symbol.toPrimitive]; if (void 0 !== e) { var i = e.call(t, r || "default"); if ("object" != typeof i) return i; throw new TypeError("@@toPrimitive must return a primitive value."); } return ("string" === r ? String : Number)(t); }
function asyncGeneratorStep(n, t, e, r, o, a, c) { try { var i = n[a](c), u = i.value; } catch (n) { return void e(n); } i.done ? t(u) : Promise.resolve(u).then(r, o); }
function _asyncToGenerator(n) { return function () { var t = this, e = arguments; return new Promise(function (r, o) { var a = n.apply(t, e); function _next(n) { asyncGeneratorStep(a, r, o, _next, _throw, "next", n); } function _throw(n) { asyncGeneratorStep(a, r, o, _next, _throw, "throw", n); } _next(void 0); }); }; }
import React, { useState, useEffect, useRef, useCallback, useMemo } from 'react';
import { createRoot } from 'react-dom/client';
import { Search, MapPin, Navigation, Info, X, ChevronLeft, ChevronRight, Star, RotateCw, AlertTriangle, CheckCircle, User, ExternalLink, Copy, Download, Map as MapIcon, CloudOff, Share2, Link as LinkIcon, History, Trash2, Camera, Moon, Sun, Settings, ArrowLeft, BookmarkPlus, Bookmark, Wifi, WifiOff, Zap, Clock, Loader2, ScanBarcode, FileText } from 'lucide-react';

// ============================================================================
// CONSTANTS & CONFIG
// ============================================================================

var CONFIG = {
  BACKEND_URL: "https://indy-locator-exchange.onrender.com",
  ETIMS_ENDPOINT: "https://prodpci.etimspayments.com/pbw/inputAction.doh",
  SNAPSHOT_PROXY_URL: "https://indy-locator-exchange.onrender.com/api/proxy/lpr",
  STORAGE_KEYS: {
    STREETS: "opencurb_streets_data",
    META: "opencurb_meta_check",
    FAVORITES: "opencurb_favorites",
    RECENT: "opencurb_recent_searches",
    THEME: "opencurb_theme",
    SETTINGS: "opencurb_settings"
  },
  CACHE_DURATION: 24 * 60 * 60 * 1000,
  MAX_RECENT: 10,
  MAX_FAVORITES: 20,
  REQUEST_TIMEOUT: 30000,
  RETRY_ATTEMPTS: 3,
  RETRY_DELAY: 1000
};
var US_STATES = ["AL", "AK", "AZ", "AR", "CA", "CO", "CT", "DE", "DC", "FL", "GA", "HI", "ID", "IL", "IN", "IA", "KS", "KY", "LA", "ME", "MD", "MA", "MI", "MN", "MS", "MO", "MT", "NE", "NV", "NH", "NJ", "NM", "NY", "NC", "ND", "OH", "OK", "OR", "PA", "RI", "SC", "SD", "TN", "TX", "UT", "VT", "VA", "WA", "WV", "WI", "WY"];

// ============================================================================
// UTILITIES
// ============================================================================

function luhn_checksum(code) {
  var len = code.length;
  var parity = len % 2;
  var sum = 0;
  for (var i = len - 1; i >= 0; i--) {
    var d = parseInt(code.charAt(i));
    if (i % 2 === parity) {
      d *= 2;
    }
    if (d > 9) {
      d -= 9;
    }
    sum += d;
  }
  return sum % 10;
}
function luhnValidate(fullcode) {
  return luhn_checksum(fullcode) === 0;
}
function vibrate() {
  var pattern = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 10;
  if ('vibrate' in navigator) {
    navigator.vibrate(pattern);
  }
}
function fetchWithTimeout(_x) {
  return _fetchWithTimeout.apply(this, arguments);
}
function _fetchWithTimeout() {
  _fetchWithTimeout = _asyncToGenerator(function* (url) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var timeout = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : CONFIG.REQUEST_TIMEOUT;
    var controller = new AbortController();
    var id = setTimeout(() => controller.abort(), timeout);
    try {
      var response = yield fetch(url, _objectSpread(_objectSpread({}, options), {}, {
        signal: controller.signal
      }));
      clearTimeout(id);
      return response;
    } catch (error) {
      clearTimeout(id);
      throw error;
    }
  });
  return _fetchWithTimeout.apply(this, arguments);
}
function fetchWithRetry(_x2) {
  return _fetchWithRetry.apply(this, arguments);
}
function _fetchWithRetry() {
  _fetchWithRetry = _asyncToGenerator(function* (url) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var retries = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : CONFIG.RETRY_ATTEMPTS;
    var _loop = function* _loop(i) {
        try {
          return {
            v: yield fetchWithTimeout(url, options)
          };
        } catch (error) {
          if (i === retries - 1) throw error;
          yield new Promise(resolve => setTimeout(resolve, CONFIG.RETRY_DELAY * (i + 1)));
        }
      },
      _ret;
    for (var i = 0; i < retries; i++) {
      _ret = yield* _loop(i);
      if (_ret) return _ret.v;
    }
  });
  return _fetchWithRetry.apply(this, arguments);
}
var storage = {
  get: function get(key) {
    var defaultValue = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;
    try {
      var item = localStorage.getItem(key);
      return item ? JSON.parse(item) : defaultValue;
    } catch (_unused) {
      return defaultValue;
    }
  },
  set: (key, value) => {
    try {
      localStorage.setItem(key, JSON.stringify(value));
      return true;
    } catch (_unused2) {
      return false;
    }
  },
  remove: key => {
    try {
      localStorage.removeItem(key);
      return true;
    } catch (_unused3) {
      return false;
    }
  }
};

// ============================================================================
// STYLES & ICONS
// ============================================================================

var customStyles = "\n    @keyframes pulse-ring { 0% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.3); } 70% { transform: scale(1); box-shadow: 0 0 0 20px rgba(255, 255, 255, 0); } 100% { transform: scale(0.8); box-shadow: 0 0 0 0 rgba(255, 255, 255, 0); } }\n    @keyframes slideInUp { from { transform: translateY(20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n    @keyframes slideInDown { from { transform: translateY(-20px); opacity: 0; } to { transform: translateY(0); opacity: 1; } }\n    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }\n    @keyframes shimmer { 0% { background-position: -468px 0; } 100% { background-position: 468px 0; } }\n    .circle-transition { position: absolute; top: 50%; left: 50%; width: 128px; height: 128px; background-color: #E1E8F0; border-radius: 50%; transform: translate(-50%, -50%) scale(0); opacity: 0; pointer-events: none; z-index: 25; }\n    .circle-transition.expanding { opacity: 1; transform: translate(-50%, -50%) scale(25); transition: transform 0.6s cubic-bezier(0.25, 1, 0.5, 1), opacity 0.1s ease-in; }\n    .circle-transition.closing { transform: translate(-50%, -50%) scale(0); transition: transform 0.5s cubic-bezier(0.5, 0, 0.75, 0); }\n    .fade-enter { opacity: 0; transform: translateY(10px); }\n    .fade-enter-active { opacity: 1; transform: translateY(0); transition: opacity 0.4s ease-out, transform 0.4s ease-out; }\n    @keyframes shake { 0%, 100% { transform: translateX(0); } 25% { transform: translateX(-4px); } 75% { transform: translateX(4px); } }\n    .shake-input { animation: shake 0.3s ease-in-out; border-color: #D11241 !important; }\n    .skeleton { background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%); background-size: 200% 100%; animation: shimmer 1.5s infinite; }\n    .slide-in-up { animation: slideInUp 0.3s ease-out; }\n    .slide-in-down { animation: slideInDown 0.3s ease-out; }\n    .fade-in { animation: fadeIn 0.3s ease-out; }\n    .dark { --indy-blue: #001f3f; --indy-sky: #1a2332; }\n    .dark body { background-color: var(--indy-blue); }\n";
var GoogleDirectionsIcon = _ref => {
  var {
    size = 20,
    className = ""
  } = _ref;
  return /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    className: className,
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M21.71 11.29l-9-9c-.39-.39-1.02-.39-1.41 0l-9 9c-.39.39-.39 1.02 0 1.41l9 9c.39.39 1.02.39 1.41 0l9-9c.39-.38.39-1.01 0-1.41zM14 14.5V12h-4v3H8v-4c0-.55.45-1 1-1h5V7.5l3.5 3.5-3.5 3.5z"
  }));
};
var GooglePegmanIcon = _ref2 => {
  var {
    size = 20,
    className = ""
  } = _ref2;
  return /*#__PURE__*/React.createElement("svg", {
    width: size,
    height: size,
    viewBox: "0 0 24 24",
    fill: "currentColor",
    className: className,
    xmlns: "http://www.w3.org/2000/svg"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M12 2C9.5 2 7.5 4 7.5 6.5C7.5 8.7 9.1 10.5 11.15 10.9V22H12.85V16H14.5V22H16.2V10.9C18.25 10.5 19.85 8.7 19.85 6.5C19.85 4 17.85 2 15.35 2H12ZM12 4H15.35C16.75 4 17.85 5.1 17.85 6.5C17.85 7.9 16.75 9 15.35 9C14.85 9 14.4 8.85 14 8.6V7H12V8.6C11.6 8.85 11.15 9 10.65 9C9.25 9 8.15 7.9 8.15 6.5C8.15 5.1 9.25 4 10.65 4H12Z"
  }));
};

// ============================================================================
// HOOKS
// ============================================================================

function useOnlineStatus() {
  var [isOnline, setIsOnline] = useState(navigator.onLine);
  useEffect(() => {
    var handleOnline = () => setIsOnline(true);
    var handleOffline = () => setIsOnline(false);
    window.addEventListener('online', handleOnline);
    window.addEventListener('offline', handleOffline);
    return () => {
      window.removeEventListener('online', handleOnline);
      window.removeEventListener('offline', handleOffline);
    };
  }, []);
  return isOnline;
}
function useFavorites() {
  var [favorites, setFavorites] = useState(() => storage.get(CONFIG.STORAGE_KEYS.FAVORITES, []));
  var addFavorite = useCallback(item => {
    setFavorites(prev => {
      var updated = [item, ...prev.filter(f => f.id !== item.id)].slice(0, CONFIG.MAX_FAVORITES);
      storage.set(CONFIG.STORAGE_KEYS.FAVORITES, updated);
      return updated;
    });
  }, []);
  var removeFavorite = useCallback(id => {
    setFavorites(prev => {
      var updated = prev.filter(f => f.id !== id);
      storage.set(CONFIG.STORAGE_KEYS.FAVORITES, updated);
      return updated;
    });
  }, []);
  var isFavorite = useCallback(id => favorites.some(f => f.id === id), [favorites]);
  return {
    favorites,
    addFavorite,
    removeFavorite,
    isFavorite
  };
}
function useRecentSearches() {
  var [recent, setRecent] = useState(() => storage.get(CONFIG.STORAGE_KEYS.RECENT, []));
  var addRecent = useCallback(search => {
    setRecent(prev => {
      var updated = [_objectSpread(_objectSpread({}, search), {}, {
        timestamp: Date.now()
      }), ...prev.filter(s => s.query !== search.query)].slice(0, CONFIG.MAX_RECENT);
      storage.set(CONFIG.STORAGE_KEYS.RECENT, updated);
      return updated;
    });
  }, []);
  var clearRecent = useCallback(() => {
    setRecent([]);
    storage.remove(CONFIG.STORAGE_KEYS.RECENT);
  }, []);
  return {
    recent,
    addRecent,
    clearRecent
  };
}

// ============================================================================
// COMPONENTS
// ============================================================================

var LoadingSkeleton = () => /*#__PURE__*/React.createElement("div", {
  className: "space-y-4 p-4"
}, [1, 2, 3].map(i => /*#__PURE__*/React.createElement("div", {
  key: i,
  className: "bg-white rounded-2xl p-4 shadow-sm border border-gray-300 slide-in-up",
  style: {
    animationDelay: "".concat(i * 0.1, "s")
  }
}, /*#__PURE__*/React.createElement("div", {
  className: "flex gap-4"
}, /*#__PURE__*/React.createElement("div", {
  className: "flex-1 space-y-3"
}, /*#__PURE__*/React.createElement("div", {
  className: "skeleton h-6 w-3/4 rounded"
}), /*#__PURE__*/React.createElement("div", {
  className: "skeleton h-4 w-1/2 rounded"
}), /*#__PURE__*/React.createElement("div", {
  className: "skeleton h-16 w-full rounded-xl"
}), /*#__PURE__*/React.createElement("div", {
  className: "flex gap-2"
}, /*#__PURE__*/React.createElement("div", {
  className: "skeleton h-10 w-24 rounded-lg"
}), /*#__PURE__*/React.createElement("div", {
  className: "skeleton h-10 w-24 rounded-lg"
}))), /*#__PURE__*/React.createElement("div", {
  className: "skeleton w-36 h-36 rounded-2xl"
})))));
var EmptyState = _ref3 => {
  var {
    message,
    icon: Icon,
    action
  } = _ref3;
  return /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center justify-center py-16 px-6 text-center fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-white/5 rounded-full p-6 mb-4"
  }, /*#__PURE__*/React.createElement(Icon, {
    size: 48,
    className: "text-white/40"
  })), /*#__PURE__*/React.createElement("p", {
    className: "text-white/60 text-sm mb-4"
  }, message), action && action);
};
var Toast = _ref4 => {
  var {
    message,
    type = 'info',
    onClose
  } = _ref4;
  useEffect(() => {
    var timer = setTimeout(onClose, 3000);
    return () => clearTimeout(timer);
  }, [onClose]);
  var bgColor = type === 'error' ? 'bg-red-500' : type === 'success' ? 'bg-green-500' : 'bg-blue-500';
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed top-20 left-1/2 -translate-x-1/2 ".concat(bgColor, " text-white px-6 py-3 rounded-full shadow-lg z-50 slide-in-down flex items-center gap-2")
  }, type === 'success' && /*#__PURE__*/React.createElement(CheckCircle, {
    size: 18
  }), type === 'error' && /*#__PURE__*/React.createElement(AlertTriangle, {
    size: 18
  }), type === 'info' && /*#__PURE__*/React.createElement(Info, {
    size: 18
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-medium"
  }, message));
};
var ResultItem = _ref5 => {
  var {
    item,
    onFavorite,
    isFavorite
  } = _ref5;
  var [copied, setCopied] = useState(false);
  var centroid = null,
    mainActionUrl = '#',
    navigateUrl = '#',
    streetViewUrl = '#';
  if (item.geoms && item.geoms.length > 0) {
    var total = item.geoms.length;
    var avgX = item.geoms.reduce((sum, g) => sum + g.x, 0) / total;
    var avgY = item.geoms.reduce((sum, g) => sum + g.y, 0) / total;
    centroid = {
      x: avgX,
      y: avgY
    };
    var sortedGeoms = [...item.geoms].sort((a, b) => parseInt(a.id) - parseInt(b.id));
    if (sortedGeoms.length > 1) {
      var first = sortedGeoms[0];
      var last = sortedGeoms[sortedGeoms.length - 1];
      var waypoints = sortedGeoms.slice(1, -1).slice(0, 20).map(g => "".concat(g.y, ",").concat(g.x)).join('|');
      mainActionUrl = "https://www.google.com/maps/dir/?api=1&origin=".concat(first.y, ",").concat(first.x, "&destination=").concat(last.y, ",").concat(last.x, "&waypoints=").concat(waypoints, "&travelmode=walking");
    } else {
      mainActionUrl = "https://www.google.com/maps/search/?api=1&query=".concat(centroid.y, ",").concat(centroid.x);
    }
    navigateUrl = "https://www.google.com/maps/dir/?api=1&destination=".concat(encodeURIComponent(item.address + ', Indianapolis, IN'));
    streetViewUrl = "https://www.google.com/maps?q=&layer=c&cbll=".concat(centroid.y, ",").concat(centroid.x);
  }
  var handleCopy = () => {
    try {
      var text = item.ids.join(', ');
      navigator.clipboard.writeText(text);
      setCopied(true);
      vibrate([10, 50, 10]);
      setTimeout(() => setCopied(false), 2000);
    } catch (err) {
      console.error('Copy failed', err);
    }
  };
  var handleShare = /*#__PURE__*/function () {
    var _ref6 = _asyncToGenerator(function* () {
      if (!navigator.share) return;
      try {
        yield navigator.share({
          title: "Parking at ".concat(item.address),
          text: "Check out parking meters ".concat(item.ids.join(', '), " at ").concat(item.address),
          url: "".concat(window.location.origin).concat(window.location.pathname, "?q=").concat(item.ids.join('-'))
        });
      } catch (err) {
        console.log('Share dismissed');
      }
    });
    return function handleShare() {
      return _ref6.apply(this, arguments);
    };
  }();
  return /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-2xl p-4 shadow-sm border border-gray-300 mb-4 hover:shadow-lg transition-all slide-in-up"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col-reverse sm:flex-row gap-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-1 min-w-0 flex flex-col justify-between"
  }, /*#__PURE__*/React.createElement("div", null, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-start mb-2"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex-1"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "font-bold text-[#003B71] text-lg leading-tight text-black truncate pr-2"
  }, item.address), /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-gray-500 uppercase font-bold tracking-wider mt-0.5"
  }, "Indianapolis, IN")), /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      vibrate(10);
      onFavorite({
        id: item.ids.join('-'),
        address: item.address,
        ids: item.ids,
        geoms: item.geoms
      });
    },
    className: "ml-2 p-2 rounded-full hover:bg-gray-100 transition-colors active:scale-95"
  }, isFavorite ? /*#__PURE__*/React.createElement(Bookmark, {
    size: 20,
    className: "text-yellow-500 fill-yellow-500"
  }) : /*#__PURE__*/React.createElement(BookmarkPlus, {
    size: 20,
    className: "text-gray-400"
  }))), /*#__PURE__*/React.createElement("div", {
    className: "bg-[#003B71]/5 rounded-xl p-2 mb-3 border border-[#003B71]/10 relative group w-fit max-w-full"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between mb-1 px-1 gap-4"
  }, /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] uppercase font-bold text-[#003B71]/70"
  }, "Meter IDs"), /*#__PURE__*/React.createElement("div", {
    className: "flex gap-2"
  }, navigator.share && /*#__PURE__*/React.createElement("button", {
    onClick: handleShare,
    className: "flex items-center gap-1 bg-white border border-[#003B71]/20 px-2 py-0.5 rounded text-[10px] font-bold text-[#003B71] hover:bg-[#003B71]/5 transition-colors active:scale-95"
  }, /*#__PURE__*/React.createElement(Share2, {
    size: 12
  }), " Share"), /*#__PURE__*/React.createElement("button", {
    onClick: handleCopy,
    className: "flex items-center gap-1 bg-white border border-[#003B71]/20 px-2 py-0.5 rounded text-[10px] font-bold text-[#003B71] hover:bg-[#003B71]/5 transition-colors active:scale-95"
  }, copied ? /*#__PURE__*/React.createElement(CheckCircle, {
    size: 12,
    className: "text-green-600"
  }) : /*#__PURE__*/React.createElement(Copy, {
    size: 12
  }), copied ? 'Copied' : 'Copy'))), /*#__PURE__*/React.createElement("div", {
    className: "flex overflow-x-auto gap-2 pb-1 hide-scroll"
  }, item.ids.map(id => /*#__PURE__*/React.createElement("span", {
    key: id,
    className: "inline-flex items-center justify-center bg-white border border-[#003B71]/20 rounded-md px-2 py-1 text-sm font-mono font-bold text-[#003B71] whitespace-nowrap shadow-sm min-w-[3rem]"
  }, id))))), /*#__PURE__*/React.createElement("div", {
    className: "flex flex-wrap gap-3 mt-auto"
  }, /*#__PURE__*/React.createElement("a", {
    href: navigateUrl,
    target: "_blank",
    rel: "noreferrer",
    className: "flex items-center justify-center gap-1.5 bg-white text-[#003B71] border border-[#003B71]/30 py-1.5 px-3 rounded-lg text-[10px] sm:text-xs font-bold active:scale-95 transition-all hover:bg-[#003B71] hover:text-white"
  }, /*#__PURE__*/React.createElement(GoogleDirectionsIcon, {
    size: 16
  }), " Navigate"), /*#__PURE__*/React.createElement("a", {
    href: streetViewUrl,
    target: "_blank",
    rel: "noreferrer",
    className: "flex items-center justify-center gap-1.5 bg-white text-[#003B71] border border-[#003B71]/30 py-1.5 px-3 rounded-lg text-[10px] sm:text-xs font-bold active:scale-95 transition-all hover:bg-[#003B71] hover:text-white ".concat(!centroid && 'opacity-50 pointer-events-none')
  }, /*#__PURE__*/React.createElement(GooglePegmanIcon, {
    size: 16
  }), " Street View"))), /*#__PURE__*/React.createElement("div", {
    className: "w-full sm:w-36 flex-shrink-0 flex flex-col gap-2"
  }, /*#__PURE__*/React.createElement("a", {
    href: mainActionUrl,
    target: "_blank",
    rel: "noreferrer",
    className: "w-full h-24 sm:h-36 bg-gray-100 rounded-2xl overflow-hidden border-2 border-white shadow-md relative group block bg-[radial-gradient(ellipse_at_center,_var(--tw-gradient-stops))] from-gray-100 to-gray-200"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full h-full flex flex-col items-center justify-center text-[#003B71]/30 group-hover:text-[#003B71]/50 transition-colors"
  }, /*#__PURE__*/React.createElement(MapIcon, {
    size: 36,
    strokeWidth: 1.5
  })), /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 flex items-center justify-center pointer-events-none"
  }, /*#__PURE__*/React.createElement(MapPin, {
    className: "text-[#D11241] fill-[#D11241] drop-shadow-lg transform -translate-y-1",
    size: 32
  })), /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors flex items-center justify-center"
  }, /*#__PURE__*/React.createElement(ExternalLink, {
    size: 20,
    className: "text-[#003B71] opacity-0 group-hover:opacity-100 transition-opacity drop-shadow-md bg-white/80 p-1 rounded-full"
  }))), /*#__PURE__*/React.createElement("div", {
    className: "bg-[#003B71] text-white text-[10px] font-bold py-1.5 rounded-lg text-center tracking-wide uppercase shadow-sm"
  }, item.ids.length, " ", item.ids.length === 1 ? 'Unit' : 'Units'))));
};
var RecentSearchItem = _ref7 => {
  var {
    search,
    onSelect,
    onRemove
  } = _ref7;
  return /*#__PURE__*/React.createElement("button", {
    onClick: () => onSelect(search),
    className: "w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 rounded-xl transition-colors group"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3 flex-1 min-w-0"
  }, /*#__PURE__*/React.createElement(Clock, {
    size: 16,
    className: "text-white/40 flex-shrink-0"
  }), /*#__PURE__*/React.createElement("div", {
    className: "text-left flex-1 min-w-0"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-white font-medium text-sm truncate"
  }, search.query), /*#__PURE__*/React.createElement("p", {
    className: "text-white/40 text-xs"
  }, search.mode === 'id' ? 'Meter ID' : 'Street Name'))), /*#__PURE__*/React.createElement("button", {
    onClick: e => {
      e.stopPropagation();
      onRemove(search);
    },
    className: "p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-white/10 rounded"
  }, /*#__PURE__*/React.createElement(X, {
    size: 16,
    className: "text-white/60"
  })));
};
var FavoriteItem = _ref8 => {
  var {
    favorite,
    onSelect,
    onRemove
  } = _ref8;
  return /*#__PURE__*/React.createElement("button", {
    onClick: () => onSelect(favorite),
    className: "w-full flex items-center justify-between p-3 bg-white/5 hover:bg-white/10 rounded-xl transition-colors group"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3 flex-1 min-w-0"
  }, /*#__PURE__*/React.createElement(Star, {
    size: 16,
    className: "text-yellow-500 fill-yellow-500 flex-shrink-0"
  }), /*#__PURE__*/React.createElement("div", {
    className: "text-left flex-1 min-w-0"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-white font-medium text-sm truncate"
  }, favorite.address), /*#__PURE__*/React.createElement("p", {
    className: "text-white/40 text-xs"
  }, favorite.ids.length, " ", favorite.ids.length === 1 ? 'meter' : 'meters'))), /*#__PURE__*/React.createElement("button", {
    onClick: e => {
      e.stopPropagation();
      onRemove(favorite.id);
    },
    className: "p-1 opacity-0 group-hover:opacity-100 transition-opacity hover:bg-white/10 rounded"
  }, /*#__PURE__*/React.createElement(X, {
    size: 16,
    className: "text-white/60"
  })));
};
var BarcodeScannerModal = _ref9 => {
  var {
    onClose,
    onDetected
  } = _ref9;
  var scannerRef = useRef(null);
  useEffect(() => {
    var html5QrCode = new Html5Qrcode("reader");
    scannerRef.current = html5QrCode;
    html5QrCode.start({
      facingMode: "environment"
    }, {
      fps: 10,
      qrbox: {
        width: 280,
        height: 150
      },
      aspectRatio: 1.0,
      formatsToSupport: [Html5QrcodeSupportedFormats.CODE_128, Html5QrcodeSupportedFormats.CODE_39, Html5QrcodeSupportedFormats.EAN_13, Html5QrcodeSupportedFormats.UPC_A]
    }, decodedText => {
      vibrate([50]);
      onDetected(decodedText);
      html5QrCode.stop().then(onClose).catch(console.error);
    }, errorMessage => {}).catch(err => {
      console.error("Error starting scanner", err);
    });
    return () => {
      if (scannerRef.current && scannerRef.current.isScanning) {
        scannerRef.current.stop().catch(console.error);
      }
    };
  }, []);
  return /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full max-w-md bg-white rounded-3xl overflow-hidden relative"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: onClose,
    className: "absolute top-4 right-4 z-10 p-2 bg-black/50 rounded-full text-white hover:bg-black/70"
  }, /*#__PURE__*/React.createElement(X, {
    size: 24
  })), /*#__PURE__*/React.createElement("div", {
    id: "reader",
    className: "w-full h-64 bg-black"
  }), /*#__PURE__*/React.createElement("div", {
    className: "p-4 text-center"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-[#003B71] font-bold"
  }, "Scan Ticket Barcode"), /*#__PURE__*/React.createElement("p", {
    className: "text-gray-500 text-xs mt-1"
  }, "Align the barcode within the frame"))));
};

// ============================================================================
// MAIN APP COMPONENT
// ============================================================================

export default function App() {
  var [isCitationMode, setIsCitationMode] = useState(false);
  var [mode, setMode] = useState('id');
  var [view, setView] = useState('search');
  var [loading, setLoading] = useState(false);
  var [isExpanding, setIsExpanding] = useState(false);
  var [copyFeedback, setCopyFeedback] = useState(null);
  var [isScanning, setIsScanning] = useState(false);
  var [showBarcodeScanner, setShowBarcodeScanner] = useState(false);
  var [streets, setStreets] = useState([]);
  var [dataDate, setDataDate] = useState(null);
  var [startId, setStartId] = useState('');
  var [endId, setEndId] = useState('');
  var [streetQuery, setStreetQuery] = useState('');
  var [ticketNum, setTicketNum] = useState('');
  var [plateState, setPlateState] = useState('IN');
  var [plateNum, setPlateNum] = useState('');
  var [results, setResults] = useState([]);
  var [error, setError] = useState(null);
  var [shakeField, setShakeField] = useState(null);
  var [showInfoModal, setShowInfoModal] = useState(false);
  var [showSettingsModal, setShowSettingsModal] = useState(false);
  var [toast, setToast] = useState(null);
  var [installPrompt, setInstallPrompt] = useState(null);
  var [isStandalone, setIsStandalone] = useState(false);
  var isOnline = useOnlineStatus();
  var {
    favorites,
    addFavorite,
    removeFavorite,
    isFavorite
  } = useFavorites();
  var {
    recent,
    addRecent,
    clearRecent
  } = useRecentSearches();
  var formRef = useRef(null);
  var fileInputRef = useRef(null);
  var showToast = useCallback(function (message) {
    var type = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'info';
    setToast({
      message,
      type
    });
  }, []);
  var executeSearch = /*#__PURE__*/function () {
    var _ref0 = _asyncToGenerator(function* (searchMode, sId, eId, sQuery) {
      if (!isOnline) {
        setError("No internet connection");
        vibrate([10, 100, 10]);
        return;
      }
      setLoading(true);
      setError(null);
      try {
        var params = new URLSearchParams({
          mode: searchMode
        });
        if (searchMode === 'id') {
          params.append('start', sId);
          if (eId) params.append('end', eId);
        } else {
          params.append('street', sQuery);
        }
        var res = yield fetchWithRetry("".concat(CONFIG.BACKEND_URL, "/api/search?").concat(params));
        if (!res.ok) throw new Error("Server error: ".concat(res.status));
        var data = yield res.json();
        if (!data.features || data.features.length === 0) {
          setResults([]);
          setLoading(false);
          setError("No parking assets found.");
          vibrate([10, 100, 10]);
        } else {
          var groups = {};
          data.features.forEach(f => {
            var addr = f.attributes.FULL_ADDRESS ? f.attributes.FULL_ADDRESS.trim() : "Unknown Location";
            if (!groups[addr]) groups[addr] = {
              ids: [],
              geoms: []
            };
            groups[addr].ids.push(f.attributes.SPACE_NUMBER);
            if (f.geometry && f.geometry.x && f.geometry.y) groups[addr].geoms.push({
              id: f.attributes.SPACE_NUMBER,
              x: f.geometry.x,
              y: f.geometry.y
            });
          });
          var resultList = Object.keys(groups).sort().map(addr => ({
            address: addr,
            ids: groups[addr].ids.sort((a, b) => a - b),
            geoms: groups[addr].geoms
          }));
          setResults(resultList);
          setIsExpanding(true);
          addRecent({
            query: searchMode === 'id' ? "".concat(sId).concat(eId ? "-".concat(eId) : '') : sQuery,
            mode: searchMode
          });
          vibrate(10);
          setTimeout(() => {
            setView('results');
            setLoading(false);
          }, 400);
        }
      } catch (e) {
        console.error('Search error:', e);
        setError(e.name === 'AbortError' ? "Request timed out. Try again." : "Connection failed. Check your internet.");
        setLoading(false);
        vibrate([10, 100, 10, 100, 10]);
      }
    });
    return function executeSearch(_x3, _x4, _x5, _x6) {
      return _ref0.apply(this, arguments);
    };
  }();
  var handleCameraClick = () => {
    if (fileInputRef.current) fileInputRef.current.click();
  };
  var handleImageUpload = /*#__PURE__*/function () {
    var _ref1 = _asyncToGenerator(function* (event) {
      var file = event.target.files[0];
      if (!file) return;
      setIsScanning(true);
      setError(null);
      vibrate(10);
      var formData = new FormData();
      formData.append('upload', file);
      formData.append('regions', 'us');
      try {
        var response = yield fetch(CONFIG.SNAPSHOT_PROXY_URL, {
          method: 'POST',
          body: formData
        });
        if (!response.ok) {
          var errorDetails = {};
          try {
            errorDetails = yield response.json();
          } catch (e) {}
          if (response.status === 502 && errorDetails.details && errorDetails.details.includes('403')) throw new Error('Backend LPR Token Invalid');
          if (response.status === 404) throw new Error('LPR Endpoint not found on server');
          throw new Error('API Error');
        }
        var data = yield response.json();
        if (data.results && data.results.length > 0) {
          var bestMatch = data.results[0];
          var plate = bestMatch.plate.toUpperCase();
          setPlateNum(plate);
          if (bestMatch.region && bestMatch.region.code) {
            var regionCode = bestMatch.region.code.split('-').pop().toUpperCase();
            if (US_STATES.includes(regionCode)) setPlateState(regionCode);
          }
          showToast("Plate detected: ".concat(plate), 'success');
          vibrate([10, 50, 10]);
        } else {
          setError("No license plate detected. Try again.");
          vibrate([10, 100, 10]);
        }
      } catch (err) {
        console.error("LPR Error:", err);
        if (err.message === 'Backend LPR Token Invalid') {
          showToast("Backend API Token missing (403)", "error");
        } else if (err.message.includes('Endpoint not found')) {
          showToast("Server update required (404)", "error");
        } else {
          setError("Failed to scan plate. Please enter manually.");
        }
        vibrate([10, 100, 10]);
      } finally {
        setIsScanning(false);
        event.target.value = null;
      }
    });
    return function handleImageUpload(_x7) {
      return _ref1.apply(this, arguments);
    };
  }();
  var handleBarcodeDetected = code => {
    setTicketNum(code);
    showToast("Ticket scanned: ".concat(code), 'success');
  };
  var getCitationShareData = () => {
    var shareUrl = window.location.origin + window.location.pathname,
      text = "";
    if (mode === 'ticket' && ticketNum) {
      shareUrl += "?ticket=".concat(ticketNum);
      text = "Pay citation #".concat(ticketNum, ": ").concat(shareUrl);
    } else if (mode === 'plate' && plateNum) {
      shareUrl += "?plate=".concat(plateNum, "&state=").concat(plateState);
      text = "Pay citations for ".concat(plateState, " plate ").concat(plateNum, ": ").concat(shareUrl);
    }
    return {
      shareUrl,
      text
    };
  };
  var handleCitationShare = /*#__PURE__*/function () {
    var _ref10 = _asyncToGenerator(function* () {
      var {
        shareUrl,
        text
      } = getCitationShareData();
      if (!text) return;
      if (navigator.share) {
        try {
          yield navigator.share({
            title: "Open Curb Citation",
            text: text,
            url: shareUrl
          });
          vibrate(10);
        } catch (err) {}
      } else {
        handleCitationCopy();
      }
    });
    return function handleCitationShare() {
      return _ref10.apply(this, arguments);
    };
  }();
  var handleCitationCopy = /*#__PURE__*/function () {
    var _ref11 = _asyncToGenerator(function* () {
      var {
        text
      } = getCitationShareData();
      if (!text) return;
      try {
        yield navigator.clipboard.writeText(text);
        setCopyFeedback("Copied!");
        vibrate([10, 50, 10]);
        setTimeout(() => setCopyFeedback(null), 2000);
      } catch (err) {
        console.error("Copy failed");
      }
    });
    return function handleCitationCopy() {
      return _ref11.apply(this, arguments);
    };
  }();
  useEffect(() => {
    var handleInstallPrompt = e => {
      e.preventDefault();
      setInstallPrompt(e);
    };
    var handleAppInstalled = () => {
      setInstallPrompt(null);
      showToast('App installed successfully!', 'success');
    };
    var checkStandalone = () => {
      setIsStandalone(window.matchMedia('(display-mode: standalone)').matches || window.navigator.standalone || document.referrer.includes('android-app://'));
    };
    var handleShareTarget = () => {
      var params = new URLSearchParams(window.location.search);
      var query = params.get('share_text') || params.get('q') || params.get('text');
      var ticketParam = params.get('ticket'),
        plateParam = params.get('plate'),
        stateParam = params.get('state');
      if (ticketParam) {
        setIsCitationMode(true);
        setMode('ticket');
        setTicketNum(ticketParam);
        window.history.replaceState({}, document.title, window.location.pathname);
        return;
      }
      if (plateParam) {
        setIsCitationMode(true);
        setMode('plate');
        setPlateNum(plateParam);
        if (stateParam) setPlateState(stateParam);
        window.history.replaceState({}, document.title, window.location.pathname);
        return;
      }
      if (query) {
        var match = query.match(/\b\d{3,6}\b/);
        if (match) {
          var foundId = match[0];
          setMode('id');
          setStartId(foundId);
          setIsCitationMode(false);
          executeSearch('id', foundId, '', '');
          window.history.replaceState({}, document.title, window.location.pathname);
        }
      }
    };
    window.addEventListener('beforeinstallprompt', handleInstallPrompt);
    window.addEventListener('appinstalled', handleAppInstalled);
    checkStandalone();
    handleShareTarget();
    var mediaQuery = window.matchMedia('(display-mode: standalone)');
    try {
      mediaQuery.addEventListener('change', checkStandalone);
    } catch (e) {
      mediaQuery.addListener(checkStandalone);
    }
    return () => {
      window.removeEventListener('beforeinstallprompt', handleInstallPrompt);
      window.removeEventListener('appinstalled', handleAppInstalled);
      try {
        mediaQuery.removeEventListener('change', checkStandalone);
      } catch (e) {
        mediaQuery.removeListener(checkStandalone);
      }
    };
  }, []);
  useEffect(() => {
    var checkMeta = /*#__PURE__*/function () {
      var _ref12 = _asyncToGenerator(function* () {
        try {
          var _data$data;
          var res = yield fetchWithRetry("".concat(CONFIG.BACKEND_URL, "/api/meta"));
          var data = yield res.json();
          if ((_data$data = data.data) !== null && _data$data !== void 0 && (_data$data = _data$data[0]) !== null && _data$data !== void 0 && (_data$data = _data$data.attributes) !== null && _data$data !== void 0 && _data$data.modified) {
            var dateStr = new Date(data.data[0].attributes.modified).toLocaleDateString();
            setDataDate(dateStr);
            var cachedMeta = storage.get(CONFIG.STORAGE_KEYS.META);
            if ((cachedMeta === null || cachedMeta === void 0 ? void 0 : cachedMeta.timestamp) < data.data[0].attributes.modified) {
              storage.remove(CONFIG.STORAGE_KEYS.STREETS);
            }
            storage.set(CONFIG.STORAGE_KEYS.META, {
              timestamp: data.data[0].attributes.modified,
              displayDate: dateStr
            });
          }
        } catch (e) {
          console.error("Meta handshake failed.", e);
        }
      });
      return function checkMeta() {
        return _ref12.apply(this, arguments);
      };
    }();
    checkMeta();
  }, []);
  useEffect(() => {
    if (!isCitationMode && mode === 'street' && streets.length === 0) {
      var loadStreets = /*#__PURE__*/function () {
        var _ref13 = _asyncToGenerator(function* () {
          var cached = storage.get(CONFIG.STORAGE_KEYS.STREETS);
          if (cached) {
            setStreets(cached);
            return;
          }
          try {
            var res = yield fetchWithRetry("".concat(CONFIG.BACKEND_URL, "/api/streets"));
            var sorted = yield res.json();
            storage.set(CONFIG.STORAGE_KEYS.STREETS, sorted);
            setStreets(sorted);
          } catch (e) {
            console.error("Street handshake failed", e);
            showToast('Failed to load street names', 'error');
          }
        });
        return function loadStreets() {
          return _ref13.apply(this, arguments);
        };
      }();
      loadStreets();
    }
  }, [mode, isCitationMode]);
  var handleInstallClick = /*#__PURE__*/function () {
    var _ref14 = _asyncToGenerator(function* () {
      if (!installPrompt) return;
      installPrompt.prompt();
      var {
        outcome
      } = yield installPrompt.userChoice;
      if (outcome === 'accepted') setInstallPrompt(null);
    });
    return function handleInstallClick() {
      return _ref14.apply(this, arguments);
    };
  }();
  var toggleCitationMode = () => {
    setIsCitationMode(!isCitationMode);
    setMode(isCitationMode ? 'id' : 'ticket');
    setError(null);
    setResults([]);
    setView('search');
    vibrate(10);
  };
  var handleSearch = /*#__PURE__*/function () {
    var _ref15 = _asyncToGenerator(function* () {
      setError(null);
      setShakeField(null);
      if (isCitationMode) {
        if (mode === 'ticket') {
          if (!ticketNum) {
            setError("Enter a ticket number");
            setShakeField('ticket');
            vibrate([10, 100, 10]);
            return;
          }
          if (ticketNum.length !== 9) {
            setError("Ticket number must be 9 digits");
            setShakeField('ticket');
            vibrate([10, 100, 10]);
            return;
          }
          if (!ticketNum.startsWith('0') && !ticketNum.startsWith('71')) {
            setError("Ticket must start with 0 or 71");
            setShakeField('ticket');
            vibrate([10, 100, 10]);
            return;
          }
          if (!luhnValidate(ticketNum)) {
            setError("Invalid ticket number");
            setShakeField('ticket');
            vibrate([10, 100, 10]);
            return;
          }
        } else {
          if (!plateNum) {
            setError("Enter a license plate");
            setShakeField('plate');
            vibrate([10, 100, 10]);
            return;
          }
        }
        vibrate(10);
        formRef.current.submit();
        setTicketNum('');
        setPlateNum('');
        setPlateState('IN');
        return;
      }
      if (mode === 'id') {
        if (!startId) {
          setError("Please enter a Start ID");
          setShakeField('start');
          vibrate([10, 100, 10]);
          return;
        }
        if (startId.length < 3) {
          setError("Meter ID too short (min 3 digits)");
          setShakeField('start');
          vibrate([10, 100, 10]);
          return;
        }
        if (endId && parseInt(endId) <= parseInt(startId)) {
          setError("End ID must be greater than Start ID");
          setShakeField('end');
          vibrate([10, 100, 10]);
          return;
        }
      } else {
        if (!streetQuery || streetQuery.trim().length < 2) {
          setError("Please select a valid street name");
          setShakeField('street');
          vibrate([10, 100, 10]);
          return;
        }
      }
      executeSearch(mode, startId, endId, streetQuery);
    });
    return function handleSearch() {
      return _ref15.apply(this, arguments);
    };
  }();
  var handleNewSearch = () => {
    setIsExpanding(false);
    vibrate(10);
    setTimeout(() => {
      setView('search');
      setStartId('');
      setEndId('');
      setStreetQuery('');
      setResults([]);
      setError(null);
    }, 300);
  };
  var handleNumericInput = setter => e => {
    var val = e.target.value;
    if (val === '' || /^[1-9]\d*$/.test(val)) setter(val);
  };
  var handleTicketInput = e => {
    var val = e.target.value.replace(/\D/g, '');
    setTicketNum(val);
  };
  var handleRecentSelect = search => {
    vibrate(10);
    if (search.mode === 'id') {
      var parts = search.query.split('-');
      setStartId(parts[0]);
      setEndId(parts[1] || '');
      setMode('id');
    } else {
      setStreetQuery(search.query);
      setMode('street');
    }
  };
  var handleFavoriteSelect = favorite => {
    vibrate(10);
    setResults([favorite]);
    setView('results');
  };
  return /*#__PURE__*/React.createElement("div", {
    className: "h-screen w-screen relative flex flex-col font-sans text-white"
  }, /*#__PURE__*/React.createElement("style", null, customStyles), toast && /*#__PURE__*/React.createElement(Toast, {
    message: toast.message,
    type: toast.type,
    onClose: () => setToast(null)
  }), /*#__PURE__*/React.createElement("input", {
    type: "file",
    accept: "image/*",
    capture: "environment",
    ref: fileInputRef,
    onChange: handleImageUpload,
    className: "hidden"
  }), showBarcodeScanner && /*#__PURE__*/React.createElement(BarcodeScannerModal, {
    onClose: () => setShowBarcodeScanner(false),
    onDetected: handleBarcodeDetected
  }), /*#__PURE__*/React.createElement("form", {
    ref: formRef,
    action: CONFIG.ETIMS_ENDPOINT,
    method: "POST",
    target: "_blank",
    className: "hidden"
  }, /*#__PURE__*/React.createElement("input", {
    type: "hidden",
    name: "clientcode",
    value: "5I"
  }), /*#__PURE__*/React.createElement("input", {
    type: "hidden",
    name: "requestType",
    value: "submit"
  }), /*#__PURE__*/React.createElement("input", {
    type: "hidden",
    name: "requestCount",
    value: "1"
  }), /*#__PURE__*/React.createElement("input", {
    type: "hidden",
    name: "clientAccount",
    value: "6"
  }), /*#__PURE__*/React.createElement("input", {
    type: "hidden",
    name: "paymentType",
    value: mode === 'ticket' ? 'T' : 'P'
  }), /*#__PURE__*/React.createElement("input", {
    type: "hidden",
    name: "documentNum",
    value: mode === 'ticket' ? ticketNum : "".concat(plateState).concat(plateNum)
  }), /*#__PURE__*/React.createElement("input", {
    type: "submit",
    value: "Submit"
  })), /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-[radial-gradient(circle_at_center,#003B71_0%,#001f3f_100%)] z-0"
  }), /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 opacity-10 pointer-events-none z-0",
    style: {
      backgroundImage: 'linear-gradient(rgba(255,255,255,0.1) 1px, transparent 1px), linear-gradient(90deg, rgba(255,255,255,0.1) 1px, transparent 1px)',
      backgroundSize: '40px 40px'
    }
  }), /*#__PURE__*/React.createElement("header", {
    className: "relative z-10 safe-top px-6 py-6 grid grid-cols-[1fr_auto_1fr] sm:flex sm:justify-between items-center transition-opacity duration-300 ".concat(view !== 'search' ? 'opacity-0 pointer-events-none' : 'opacity-100')
  }, /*#__PURE__*/React.createElement("div", {
    className: "col-start-2"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: toggleCitationMode,
    className: "focus:outline-none active:scale-95 transition-transform block"
  }, /*#__PURE__*/React.createElement("img", {
    src: "https://raw.githubusercontent.com/dugann/indy-locator-web/main/logo.png",
    alt: "Open Curb",
    className: "h-8 sm:h-14 w-auto object-contain drop-shadow-md"
  }))), /*#__PURE__*/React.createElement("div", {
    className: "flex gap-2 col-start-3 justify-self-end"
  }, !isOnline && /*#__PURE__*/React.createElement("div", {
    className: "p-3 bg-red-500/20 rounded-full animate-pulse",
    title: "Offline"
  }, /*#__PURE__*/React.createElement(WifiOff, {
    size: 24,
    className: "text-red-300"
  })), installPrompt && !isStandalone && /*#__PURE__*/React.createElement("button", {
    onClick: handleInstallClick,
    className: "p-3 bg-white/10 rounded-full hover:bg-white/20 transition-colors slide-in-down",
    title: "Install App"
  }, /*#__PURE__*/React.createElement(Download, {
    size: 24,
    className: "text-white/80"
  })), /*#__PURE__*/React.createElement("button", {
    onClick: () => setShowSettingsModal(true),
    className: "p-3 bg-white/10 rounded-full hover:bg-white/20 transition-colors",
    title: "Settings"
  }, /*#__PURE__*/React.createElement(Settings, {
    size: 24,
    className: "text-white/80"
  })))), /*#__PURE__*/React.createElement("main", {
    className: "flex-1 relative z-10 flex flex-col transition-all duration-300 ".concat(view !== 'search' ? 'opacity-0 pointer-events-none scale-95' : 'opacity-100 scale-100')
  }, /*#__PURE__*/React.createElement("div", {
    className: "mt-4 sm:mt-16 px-6 flex flex-col gap-8 sm:gap-12"
  }, /*#__PURE__*/React.createElement("div", {
    className: "w-full max-w-md mx-auto space-y-4 sm:space-y-6 relative z-10"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex bg-white/10 p-1.5 sm:p-2 rounded-2xl backdrop-blur-sm border border-white/20"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      setMode(isCitationMode ? 'ticket' : 'id');
      setError(null);
      vibrate(10);
    },
    className: "flex-1 py-4 px-2 sm:px-4 rounded-xl text-sm sm:text-base font-semibold transition-all duration-300 flex items-center justify-center gap-2 ".concat(mode === 'id' || mode === 'ticket' ? 'bg-white/20 text-white shadow-inner' : 'text-white/60 hover:text-white hover:bg-white/5')
  }, isCitationMode ? 'Ticket #' : 'Meter ID'), /*#__PURE__*/React.createElement("div", {
    className: "w-[1px] bg-white/10 my-2"
  }), /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      setMode(isCitationMode ? 'plate' : 'street');
      setError(null);
      vibrate(10);
    },
    className: "flex-1 py-4 px-2 sm:px-4 rounded-xl text-sm sm:text-base font-semibold transition-all duration-300 flex items-center justify-center gap-2 ".concat(mode === 'street' || mode === 'plate' ? 'bg-white/20 text-white shadow-inner' : 'text-white/60 hover:text-white hover:bg-white/5')
  }, isCitationMode ? 'License Plate' : 'Street Name')), /*#__PURE__*/React.createElement("div", {
    className: "min-h-[80px] sm:min-h-[120px] flex flex-col justify-center"
  }, !isCitationMode && mode === 'id' && /*#__PURE__*/React.createElement("div", {
    className: "flex w-full items-center gap-2 animate-in fade-in slide-in-from-bottom-4 duration-300"
  }, /*#__PURE__*/React.createElement("input", {
    type: "tel",
    placeholder: "Start",
    className: "flex-1 min-w-0 bg-white/20 border-2 focus:border-white/50 text-white placeholder-white/40 rounded-3xl py-3 h-14 sm:h-16 px-4 text-center text-xl sm:text-2xl font-mono outline-none transition-all ".concat(shakeField === 'start' ? 'shake-input border-[#D11241]' : 'border-white/10'),
    value: startId,
    onChange: handleNumericInput(setStartId),
    maxLength: 6
  }), /*#__PURE__*/React.createElement("span", {
    className: "text-white/40 font-light text-2xl shrink-0 px-1"
  }, "-"), /*#__PURE__*/React.createElement("input", {
    type: "tel",
    placeholder: "End",
    className: "flex-1 min-w-0 bg-white/20 border-2 focus:border-white/50 text-white placeholder-white/40 rounded-3xl py-3 h-14 sm:h-16 px-4 text-center text-xl sm:text-2xl font-mono outline-none transition-all disabled:opacity-30 ".concat(shakeField === 'end' ? 'shake-input border-[#D11241]' : 'border-white/10'),
    value: endId,
    onChange: handleNumericInput(setEndId),
    disabled: startId.length < 3,
    maxLength: 6
  })), !isCitationMode && mode === 'street' && /*#__PURE__*/React.createElement("div", {
    className: "relative w-full animate-in fade-in slide-in-from-bottom-4 duration-300"
  }, /*#__PURE__*/React.createElement("input", {
    list: "streets",
    placeholder: "Search Street Name...",
    className: "w-full bg-white/20 border-2 focus:border-white/50 text-white placeholder-white/40 rounded-3xl py-3 h-14 sm:h-16 px-4 sm:px-6 text-lg font-medium outline-none transition-all ".concat(shakeField === 'street' ? 'shake-input border-[#D11241]' : 'border-white/10'),
    value: streetQuery,
    onChange: e => setStreetQuery(e.target.value)
  }), /*#__PURE__*/React.createElement("datalist", {
    id: "streets"
  }, streets.map(s => /*#__PURE__*/React.createElement("option", {
    key: s,
    value: s
  }))), /*#__PURE__*/React.createElement("div", {
    className: "absolute right-5 top-1/2 -translate-y-1/2 text-white/40 pointer-events-none"
  }, /*#__PURE__*/React.createElement(Search, {
    size: 20
  }))), isCitationMode && mode === 'ticket' && /*#__PURE__*/React.createElement("div", {
    className: "animate-in fade-in slide-in-from-bottom-4 duration-300 flex flex-col items-center gap-4 w-full"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2 w-full"
  }, /*#__PURE__*/React.createElement("input", {
    type: "tel",
    placeholder: "Ticket Number",
    className: "flex-1 min-w-0 bg-white/20 border-2 focus:border-white/50 text-white placeholder-white/40 rounded-3xl py-3 h-14 sm:h-16 px-2 sm:px-4 text-center text-lg sm:text-2xl font-mono outline-none transition-all ".concat(shakeField === 'ticket' ? 'shake-input border-[#D11241]' : 'border-white/10'),
    value: ticketNum,
    onChange: handleTicketInput,
    maxLength: 9
  }), /*#__PURE__*/React.createElement("button", {
    onClick: () => setShowBarcodeScanner(true),
    className: "w-14 sm:w-16 h-14 sm:h-16 flex items-center justify-center rounded-3xl bg-white/20 border-2 border-white/10 hover:bg-white/30 text-white transition-all active:scale-95 flex-none",
    title: "Scan Barcode"
  }, /*#__PURE__*/React.createElement(ScanBarcode, {
    size: 24
  }))), ticketNum.length > 3 && /*#__PURE__*/React.createElement("div", {
    className: "flex gap-2 w-full px-4 slide-in-up"
  }, navigator.share && /*#__PURE__*/React.createElement("button", {
    onClick: handleCitationShare,
    className: "flex-1 py-2.5 bg-white/10 rounded-xl hover:bg-white/20 transition-colors text-xs font-bold flex items-center justify-center gap-2 active:scale-95"
  }, /*#__PURE__*/React.createElement(Share2, {
    size: 14
  }), " Share"), /*#__PURE__*/React.createElement("button", {
    onClick: handleCitationCopy,
    className: "flex-1 py-2.5 bg-white/10 rounded-xl hover:bg-white/20 transition-colors text-xs font-bold flex items-center justify-center gap-2 active:scale-95"
  }, copyFeedback ? /*#__PURE__*/React.createElement(CheckCircle, {
    size: 14,
    className: "text-green-400"
  }) : /*#__PURE__*/React.createElement(Copy, {
    size: 14
  }), copyFeedback || "Copy Link"))), isCitationMode && mode === 'plate' && /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center w-full space-y-4 animate-in fade-in slide-in-from-bottom-4 duration-300"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2 w-full"
  }, /*#__PURE__*/React.createElement("div", {
    className: "relative w-[70px] sm:w-[80px] flex-none"
  }, /*#__PURE__*/React.createElement("select", {
    value: plateState,
    onChange: e => setPlateState(e.target.value),
    className: "w-full bg-white/20 border-2 border-white/10 focus:border-white/50 text-white rounded-3xl py-3 h-14 sm:h-16 px-2 text-center text-sm sm:text-lg font-bold appearance-none outline-none transition-all"
  }, US_STATES.map(s => /*#__PURE__*/React.createElement("option", {
    key: s,
    value: s,
    className: "text-black"
  }, s))), /*#__PURE__*/React.createElement("div", {
    className: "absolute right-1 sm:right-2 top-1/2 -translate-y-1/2 pointer-events-none text-white/60 text-xs"
  }, "\u25BC")), /*#__PURE__*/React.createElement("input", {
    type: "text",
    placeholder: "PLATE #",
    className: "flex-1 min-w-0 bg-white/20 border-2 focus:border-white/50 text-white placeholder-white/40 rounded-3xl py-3 h-14 sm:h-16 px-2 sm:px-4 text-center text-lg sm:text-xl font-mono uppercase outline-none transition-all ".concat(shakeField === 'plate' ? 'shake-input border-[#D11241]' : 'border-white/10'),
    value: plateNum,
    onChange: e => setPlateNum(e.target.value.toUpperCase())
  }), /*#__PURE__*/React.createElement("button", {
    onClick: handleCameraClick,
    disabled: isScanning,
    className: "w-14 sm:w-16 h-14 sm:h-16 flex items-center justify-center rounded-3xl bg-white/20 border-2 border-white/10 hover:bg-white/30 text-white transition-all active:scale-95 flex-none ".concat(isScanning ? 'opacity-50 cursor-not-allowed' : ''),
    title: "Scan Plate"
  }, isScanning ? /*#__PURE__*/React.createElement(Loader2, {
    size: 24,
    className: "animate-spin"
  }) : /*#__PURE__*/React.createElement(Camera, {
    size: 24
  }))), plateNum.length > 2 && /*#__PURE__*/React.createElement("div", {
    className: "flex gap-2 w-full px-4 slide-in-up"
  }, navigator.share && /*#__PURE__*/React.createElement("button", {
    onClick: handleCitationShare,
    className: "flex-1 py-2.5 bg-white/10 rounded-xl hover:bg-white/20 transition-colors text-xs font-bold flex items-center justify-center gap-2 active:scale-95"
  }, /*#__PURE__*/React.createElement(Share2, {
    size: 14
  }), " Share"), /*#__PURE__*/React.createElement("button", {
    onClick: handleCitationCopy,
    className: "flex-1 py-2.5 bg-white/10 rounded-xl hover:bg-white/20 transition-colors text-xs font-bold flex items-center justify-center gap-2 active:scale-95"
  }, copyFeedback ? /*#__PURE__*/React.createElement(CheckCircle, {
    size: 14,
    className: "text-green-400"
  }) : /*#__PURE__*/React.createElement(Copy, {
    size: 14
  }), copyFeedback || "Copy Link")))), error && /*#__PURE__*/React.createElement("div", {
    className: "bg-[#D11241]/20 border border-[#D11241] rounded-2xl p-3 text-center slide-in-down"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-white text-sm font-semibold flex items-center justify-center gap-2"
  }, /*#__PURE__*/React.createElement(AlertTriangle, {
    size: 16
  }), " ", error)), !isCitationMode && recent.length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "space-y-2 slide-in-up"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between px-2"
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-white/60 text-sm font-bold uppercase tracking-wider flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(History, {
    size: 16
  }), " Recent"), /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      clearRecent();
      vibrate(10);
    },
    className: "text-white/40 hover:text-white/60 text-xs flex items-center gap-1 transition-colors"
  }, /*#__PURE__*/React.createElement(Trash2, {
    size: 14
  }), " Clear")), /*#__PURE__*/React.createElement("div", {
    className: "space-y-1 max-h-40 overflow-y-auto hide-scroll"
  }, recent.slice(0, 5).map((search, idx) => /*#__PURE__*/React.createElement(RecentSearchItem, {
    key: idx,
    search: search,
    onSelect: handleRecentSelect,
    onRemove: s => {
      var updated = recent.filter(r => r.query !== s.query);
      storage.set(CONFIG.STORAGE_KEYS.RECENT, updated);
      vibrate(10);
    }
  })))), !isCitationMode && favorites.length > 0 && /*#__PURE__*/React.createElement("div", {
    className: "space-y-2 slide-in-up",
    style: {
      animationDelay: '0.1s'
    }
  }, /*#__PURE__*/React.createElement("h3", {
    className: "text-white/60 text-sm font-bold uppercase tracking-wider flex items-center gap-2 px-2"
  }, /*#__PURE__*/React.createElement(Star, {
    size: 16,
    className: "text-yellow-500 fill-yellow-500"
  }), " Favorites"), /*#__PURE__*/React.createElement("div", {
    className: "space-y-1 max-h-40 overflow-y-auto hide-scroll"
  }, favorites.slice(0, 5).map(fav => /*#__PURE__*/React.createElement(FavoriteItem, {
    key: fav.id,
    favorite: fav,
    onSelect: handleFavoriteSelect,
    onRemove: id => {
      removeFavorite(id);
      vibrate(10);
    }
  })))))), /*#__PURE__*/React.createElement("div", {
    className: "flex-grow flex flex-col items-center justify-start pt-8 relative pb-32"
  }, /*#__PURE__*/React.createElement("div", {
    className: "relative flex justify-center items-center"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute w-48 h-48 sm:w-64 sm:h-64 border border-white/5 rounded-full pointer-events-none"
  }), /*#__PURE__*/React.createElement("div", {
    className: "absolute w-36 h-36 sm:w-48 sm:h-48 border border-white/10 rounded-full pointer-events-none"
  }), /*#__PURE__*/React.createElement("div", {
    className: "circle-transition ".concat(isExpanding ? 'expanding' : '', " ").concat(!isExpanding && view !== 'search' && !isCitationMode ? 'closing' : '')
  }), loading && !isExpanding && /*#__PURE__*/React.createElement("div", {
    className: "absolute -top-24 sm:-top-20 left-0 right-0 flex justify-center z-40 px-6"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-[#003B71]/80 backdrop-blur-md border border-white/10 p-3 rounded-2xl max-w-xs text-center animate-pulse slide-in-down"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-center mb-1"
  }, /*#__PURE__*/React.createElement(CloudOff, {
    className: "text-white/60",
    size: 20
  })), /*#__PURE__*/React.createElement("p", {
    className: "text-white/80 text-xs font-medium leading-relaxed"
  }, "Connecting to free-tier backend...", /*#__PURE__*/React.createElement("br", null), /*#__PURE__*/React.createElement("span", {
    className: "text-white/50"
  }, "This may take up to 50s on first use.")))), /*#__PURE__*/React.createElement("button", {
    onClick: handleSearch,
    disabled: loading,
    className: "group relative w-32 h-32 sm:w-40 sm:h-40 rounded-full bg-white shadow-[0_0_40px_rgba(255,255,255,0.15)] hover:shadow-[0_0_60px_rgba(255,255,255,0.3)] transition-all duration-300 active:scale-95 flex items-center justify-center z-30 disabled:opacity-50 disabled:cursor-not-allowed"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-1 rounded-full border-4 border-double border-[#003B71]/10 group-hover:border-[#003B71]/30 transition-colors"
  }), /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center text-[#003B71]"
  }, loading && !isExpanding ? /*#__PURE__*/React.createElement(RotateCw, {
    className: "animate-spin",
    size: 32
  }) : /*#__PURE__*/React.createElement(React.Fragment, null, isCitationMode ? /*#__PURE__*/React.createElement(Search, {
    size: 32,
    strokeWidth: 2.5,
    className: "sm:hidden"
  }) : /*#__PURE__*/React.createElement(Search, {
    size: 32,
    strokeWidth: 2.5,
    className: "sm:hidden"
  }), isCitationMode ? /*#__PURE__*/React.createElement(Search, {
    size: 40,
    strokeWidth: 2.5,
    className: "hidden sm:block"
  }) : /*#__PURE__*/React.createElement(Search, {
    size: 40,
    strokeWidth: 2.5,
    className: "hidden sm:block"
  }), /*#__PURE__*/React.createElement("span", {
    className: "text-xs sm:text-sm font-black uppercase tracking-widest mt-1"
  }, isCitationMode ? 'Lookup' : 'Find'))))), /*#__PURE__*/React.createElement("button", {
    onClick: toggleCitationMode,
    className: "mt-8 sm:my-auto flex items-center gap-2 bg-white/10 hover:bg-white/20 px-6 py-3 rounded-xl backdrop-blur-md transition-all active:scale-95 border border-white/10 group z-30"
  }, isCitationMode ? /*#__PURE__*/React.createElement(MapIcon, {
    size: 20,
    className: "text-white/80 group-hover:text-white"
  }) : /*#__PURE__*/React.createElement(FileText, {
    size: 20,
    className: "text-white/80 group-hover:text-white"
  }), /*#__PURE__*/React.createElement("div", {
    className: "text-left"
  }, /*#__PURE__*/React.createElement("span", {
    className: "block text-[10px] uppercase font-bold text-white/60"
  }, "Switch To"), /*#__PURE__*/React.createElement("span", {
    className: "block font-bold text-sm text-white group-hover:text-white transition-colors"
  }, isCitationMode ? "Space Locator" : "Citation Portal"))))), /*#__PURE__*/React.createElement("div", {
    className: "fixed bottom-6 left-0 right-0 text-center z-10 transition-opacity duration-300 ".concat(view === 'results' ? 'opacity-0' : 'opacity-80')
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex flex-col items-center gap-4 text-sm",
    style: {
      borderColor: 'rgba(255,255,255,0.2)',
      color: 'rgba(255,255,255,0.7)'
    }
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3"
  }, /*#__PURE__*/React.createElement("span", {
    className: "font-medium"
  }, "Built by ", /*#__PURE__*/React.createElement("span", {
    style: {
      color: '#fff'
    }
  }, "William Dugann")), /*#__PURE__*/React.createElement("span", null, "|"), /*#__PURE__*/React.createElement("a", {
    href: "https://github.com/dugann",
    className: "hover:text-white transition-colors p-1",
    target: "_blank",
    rel: "noreferrer"
  }, /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "20",
    height: "20",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
  }), /*#__PURE__*/React.createElement("path", {
    d: "M9 18c-4.51 2-5-2-7-2"
  }))), /*#__PURE__*/React.createElement("a", {
    href: "https://www.linkedin.com/in/dugann/",
    className: "transition-colors p-1 hover:text-white",
    style: {
      color: 'white'
    },
    target: "_blank",
    rel: "noreferrer"
  }, /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "20",
    height: "20",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"
  }), /*#__PURE__*/React.createElement("rect", {
    width: "4",
    height: "12",
    x: "2",
    y: "9"
  }), /*#__PURE__*/React.createElement("circle", {
    cx: "4",
    cy: "4",
    r: "2"
  })))))), /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-x-0 bottom-0 z-30 bg-slate-200 text-[#003B71] rounded-t-[2.5rem] shadow-2xl transition-transform duration-500 cubic-bezier(0.32, 0.72, 0, 1) flex flex-col safe-bottom ".concat(view === 'results' ? 'translate-y-0 h-[85vh]' : 'translate-y-full h-[85vh]')
  }, /*#__PURE__*/React.createElement("div", {
    className: "px-6 py-4 flex items-center justify-between bg-[#003B71] rounded-t-[2.5rem] sticky top-0 z-40 shadow-md"
  }, /*#__PURE__*/React.createElement("button", {
    onClick: handleNewSearch,
    className: "flex items-center gap-2 bg-white/10 hover:bg-white/20 text-white px-5 py-2.5 rounded-xl transition-colors text-sm font-bold active:scale-95"
  }, /*#__PURE__*/React.createElement(RotateCw, {
    size: 18
  }), " New Search"), /*#__PURE__*/React.createElement("div", {
    className: "text-right"
  }, /*#__PURE__*/React.createElement("span", {
    className: "block font-bold text-white text-xl leading-none"
  }, results.length), /*#__PURE__*/React.createElement("span", {
    className: "text-[10px] text-white/60 font-bold uppercase tracking-wider"
  }, "Results"))), /*#__PURE__*/React.createElement("div", {
    className: "flex-1 overflow-y-auto hide-scroll bg-slate-200"
  }, loading ? /*#__PURE__*/React.createElement(LoadingSkeleton, null) : results.length === 0 ? /*#__PURE__*/React.createElement(EmptyState, {
    message: "No results found. Try adjusting your search.",
    icon: Search,
    action: /*#__PURE__*/React.createElement("button", {
      onClick: handleNewSearch,
      className: "px-6 py-2.5 bg-[#003B71] text-white rounded-xl font-bold active:scale-95 transition-all"
    }, "New Search")
  }) : /*#__PURE__*/React.createElement("div", {
    className: "p-4"
  }, dataDate && /*#__PURE__*/React.createElement("div", {
    className: "mb-4 p-3 bg-blue-50/80 border border-blue-200 rounded-xl flex items-start gap-3 shadow-sm slide-in-up"
  }, /*#__PURE__*/React.createElement(Info, {
    className: "text-blue-600 shrink-0 mt-0.5",
    size: 18
  }), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-blue-800 leading-relaxed font-medium"
  }, "These results are dependent on the accuracy of City maintained records which were last updated on ", /*#__PURE__*/React.createElement("span", {
    className: "font-bold"
  }, dataDate), ".")), /*#__PURE__*/React.createElement("div", {
    className: view === 'results' ? 'fade-enter-active' : 'fade-enter'
  }, results.map((item, idx) => /*#__PURE__*/React.createElement(ResultItem, {
    key: idx,
    item: item,
    onFavorite: fav => {
      if (isFavorite(fav.id)) {
        removeFavorite(fav.id);
        showToast('Removed from favorites', 'info');
      } else {
        addFavorite(fav);
        showToast('Added to favorites', 'success');
      }
    },
    isFavorite: isFavorite(item.ids.join('-'))
  })))))), showSettingsModal && /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-50 flex items-center justify-center p-4 fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-black/80 backdrop-blur-sm",
    onClick: () => setShowSettingsModal(false)
  }), /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-3xl p-6 w-full max-w-sm relative z-10 slide-in-up text-black"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center mb-6"
  }, /*#__PURE__*/React.createElement("h2", {
    className: "text-2xl font-bold text-[#003B71] flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(Settings, {
    size: 24
  }), " Settings"), /*#__PURE__*/React.createElement("button", {
    onClick: () => setShowSettingsModal(false),
    className: "p-1 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors"
  }, /*#__PURE__*/React.createElement(X, {
    size: 20,
    className: "text-gray-500"
  }))), /*#__PURE__*/React.createElement("div", {
    className: "space-y-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-gray-50 rounded-2xl p-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between mb-2"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(Zap, {
    size: 18,
    className: "text-[#003B71]"
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm"
  }, "Performance"))), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-gray-600"
  }, isOnline ? /*#__PURE__*/React.createElement("span", {
    className: "flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(Wifi, {
    size: 14,
    className: "text-green-500"
  }), " Connected") : /*#__PURE__*/React.createElement("span", {
    className: "flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(WifiOff, {
    size: 14,
    className: "text-red-500"
  }), " Offline"))), /*#__PURE__*/React.createElement("div", {
    className: "bg-gray-50 rounded-2xl p-4"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center justify-between mb-2"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2"
  }, /*#__PURE__*/React.createElement(History, {
    size: 18,
    className: "text-[#003B71]"
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm"
  }, "Data")), /*#__PURE__*/React.createElement("button", {
    onClick: () => {
      clearRecent();
      showToast('Recent searches cleared', 'success');
      vibrate(10);
    },
    className: "text-xs text-red-600 hover:text-red-700 font-bold"
  }, "Clear Recent")), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-gray-600"
  }, recent.length, " recent searches \u2022 ", favorites.length, " favorites")), dataDate && /*#__PURE__*/React.createElement("div", {
    className: "bg-blue-50 rounded-2xl p-4 border border-blue-200"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-2 mb-1"
  }, /*#__PURE__*/React.createElement(Info, {
    size: 18,
    className: "text-blue-600"
  }), /*#__PURE__*/React.createElement("span", {
    className: "font-bold text-sm text-blue-900"
  }, "Data Source")), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-blue-700"
  }, "IndyGIS :: metered-parking"), /*#__PURE__*/React.createElement("p", {
    className: "text-xs text-blue-600 mt-1"
  }, "Last updated: ", /*#__PURE__*/React.createElement("span", {
    className: "font-bold"
  }, dataDate)))), /*#__PURE__*/React.createElement("button", {
    onClick: () => setShowInfoModal(true),
    className: "w-full mt-6 py-3 bg-[#003B71] text-white font-bold rounded-xl active:scale-95 transition-transform flex items-center justify-center gap-2"
  }, /*#__PURE__*/React.createElement(Info, {
    size: 18
  }), " About Open Curb"))), showInfoModal && /*#__PURE__*/React.createElement("div", {
    className: "fixed inset-0 z-50 flex items-center justify-center p-4 fade-in"
  }, /*#__PURE__*/React.createElement("div", {
    className: "absolute inset-0 bg-black/80 backdrop-blur-sm",
    onClick: () => setShowInfoModal(false)
  }), /*#__PURE__*/React.createElement("div", {
    className: "bg-white rounded-3xl p-6 w-full max-w-sm relative z-10 slide-in-up text-black"
  }, /*#__PURE__*/React.createElement("div", {
    className: "flex justify-between items-center mb-4"
  }, /*#__PURE__*/React.createElement("h2", {
    className: "text-xl font-bold text-[#003B71]"
  }, "System Intel"), /*#__PURE__*/React.createElement("button", {
    onClick: () => setShowInfoModal(false),
    className: "p-1 bg-gray-100 rounded-full hover:bg-gray-200 transition-colors"
  }, /*#__PURE__*/React.createElement(X, {
    size: 20,
    className: "text-gray-500"
  }))), /*#__PURE__*/React.createElement("p", {
    className: "text-gray-600 text-sm leading-relaxed mb-6"
  }, "This utility bridges a direct connection to Indy's Open Data MapServer (Transportation Layer 14) for public access and asset verification."), /*#__PURE__*/React.createElement("div", {
    className: "flex items-center gap-3 bg-blue-50 p-3 rounded-xl mb-4 border border-blue-100"
  }, /*#__PURE__*/React.createElement("div", {
    className: "bg-[#003B71] p-2 rounded-full text-white"
  }, /*#__PURE__*/React.createElement(User, {
    size: 16
  })), /*#__PURE__*/React.createElement("div", {
    className: "flex-1"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-gray-400 font-bold uppercase tracking-widest"
  }, "Designed By"), /*#__PURE__*/React.createElement("p", {
    className: "text-[#003B71] font-bold text-sm"
  }, "William Dugann")), /*#__PURE__*/React.createElement("div", {
    className: "flex gap-2"
  }, /*#__PURE__*/React.createElement("a", {
    href: "https://github.com/dugann",
    target: "_blank",
    rel: "noreferrer",
    className: "text-[#003B71]/70 hover:text-[#003B71] transition-colors"
  }, /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "20",
    height: "20",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M15 22v-4a4.8 4.8 0 0 0-1-3.5c3 0 6-2 6-5.5.08-1.25-.27-2.48-1-3.5.28-1.15.28-2.35 0-3.5 0 0-1 0-3 1.5-2.64-.5-5.36-.5-8 0C6 2 5 2 5 2c-.3 1.15-.3 2.35 0 3.5A5.403 5.403 0 0 0 4 9c0 3.5 3 5.5 6 5.5-.39.49-.68 1.05-.85 1.65-.17.6-.22 1.23-.15 1.85v4"
  }), /*#__PURE__*/React.createElement("path", {
    d: "M9 18c-4.51 2-5-2-7-2"
  }))), /*#__PURE__*/React.createElement("a", {
    href: "https://www.linkedin.com/in/dugann/",
    target: "_blank",
    rel: "noreferrer",
    className: "text-[#003B71]/70 hover:text-[#003B71] transition-colors"
  }, /*#__PURE__*/React.createElement("svg", {
    xmlns: "http://www.w3.org/2000/svg",
    width: "20",
    height: "20",
    viewBox: "0 0 24 24",
    fill: "none",
    stroke: "currentColor",
    strokeWidth: "2",
    strokeLinecap: "round",
    strokeLinejoin: "round"
  }, /*#__PURE__*/React.createElement("path", {
    d: "M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"
  }), /*#__PURE__*/React.createElement("rect", {
    width: "4",
    height: "12",
    x: "2",
    y: "9"
  }), /*#__PURE__*/React.createElement("circle", {
    cx: "4",
    cy: "4",
    r: "2"
  }))))), /*#__PURE__*/React.createElement("div", {
    className: "bg-gray-50 rounded-2xl p-4 mb-4"
  }, /*#__PURE__*/React.createElement("p", {
    className: "text-[10px] text-gray-400 font-bold uppercase tracking-widest mb-1"
  }, "Data Source"), /*#__PURE__*/React.createElement("p", {
    className: "text-[#003B71] font-mono text-xs"
  }, "IndyGIS :: metered-parking")), /*#__PURE__*/React.createElement("button", {
    onClick: () => setShowInfoModal(false),
    className: "w-full py-3 bg-[#003B71] text-white font-bold rounded-xl active:scale-95 transition-transform"
  }, "Dismiss"))));
}
var container = document.getElementById('root');
var root = createRoot(container);
root.render(/*#__PURE__*/React.createElement(App, null));
</script>
</body>

</html>
